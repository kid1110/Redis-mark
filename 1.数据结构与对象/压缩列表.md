# 压缩列表


### 定义
压缩列表是列表键和哈希键的底层实现之一，当一个列表键只包含少量列表项，或者列表项为小整数值或者长度较短的字符串，则使用压缩列表作为列表键的底层实现。

### 组成
zlbytes：记录整个压缩列表占用的内存字节数
zltail：记录表尾到起始地址之间的字节
zllen：节点数量
entryX：列表节点（不定）
zlend：OXFF，用于标记压缩列表的末端

### 列表节点构成
previous_entry_length：记录压缩列表中前一个点的长度，为1字节或者5字节，如果前一个节点小于254字节，则为1字节，否则则为5字节，且第一字节会被设置成0XFE，之后四个字节则用于保存前一个节点的长度。
encoding：记录content属性保存数据结构的类型和长度，可能为1，2，5字节

content：负责保存节点的值，可以是一个字节数组或者整数。

### 连锁更新
指当每个在250-253长度的节点，既然，previous_entry_length属性都是1字节，此时在表头添加一个new字节且大于254，则e1-en都需要更新，删除同理。但由于情况比较罕见，ziplistPush复杂度仍然为O（N）。