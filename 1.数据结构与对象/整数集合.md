# 整数集合
整数集合是集合键的底层实现之一，只有集合不多，或者集合只包含整数元素，Reids就会使用整数集合作为集合键的整数集合

###  定义
整数集合是redis保存整数值的集合抽象数据结构，可以保存的类型有int16_t，int32_t或者int64_t，并且集合不会出现重复元素


### 底层代码实现

```c
typedef struct intset{
    //编码方式
    uint32_t encoding;
    //集合包含的元素
    uint32_t length;
    //保存元素的数组
    int8_t contents[];
} intset;
```

contents中的元素按照从小到大的顺序排列，并且不包含重复项。


### 升级
当我们需要将一个新元素添加到整数集合中时，且新元素类型比现有集合的所有元素类型要长，整数集合需要先升级，再把新元素添加到整数元素中。
#### 步骤
1）扩展整数底层数组的空间大小，为新元素分配空间。
2）将底层现有的所有元素换成与新元素相同的类型，并将转换后的元素放到正确的位置上，同时需要保存有序性。
3）将新元素添加到底层数组中。

#### 好处
1）提高灵活性
2）节约内存

###  降级
redis中不支持降级，一旦对数组升级，则编码一直保持在升级后的状态。
